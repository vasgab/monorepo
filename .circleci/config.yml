version: 2.1

executors:
  cloud-sdk:
    docker:
      - image: google/cloud-sdk

commands:
  print:
    steps:
      - run:
          command: chmod +x .circleci/check_commit_in_folder.sh
      - run:
          command: |
            if [ .circleci/check_commit_in_folder.sh Folder-1 ];
              then
                echo "Exiting this CircleCI job because code in the following paths have not changed:"
                circleci step halt
            else
                  echo "the job continues"
            fi


jobs:
  print-changed-service:
    executor: cloud-sdk
    steps:
      - checkout
      - print


workflows:
  version: 2
  build-deploy:
    jobs:
      - print-changed-service:
          filters:
            branches:
              only: develop
